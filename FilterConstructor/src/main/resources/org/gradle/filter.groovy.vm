##
## This is the velocity gateway template file 
## for the production of gateway filters for Zuul.
## It's mostly testing right now.
##
## Author: Luke Grey
## 
import com.netflix.zuul.ZuulFilter
import com.netflix.zuul.ZuulFilterResult
import com.netflix.zuul.context.RequestContext
import com.netflix.zuul.context.Debug

class $name extends ZuulFilter {

    @Override
    int filterOrder() {
        return $order
    }

    @Override
    String filterType() {
        return "$type"
    }

    @Override
    boolean shouldFilter() {
		RequestContext ctx = RequestContext.getCurrentContext();
		
		if("$uri"==ctx.request.getRequestURI())
			return true;
			
		return false;
    }

    @Override
    Object run() {
        RequestContext ctx = RequestContext.getCurrentContext();
		
        // sets origin
		ctx.setRouteHost(new URL("$host"));

        // sets custom header to send to the origin
        ctx.addOriginResponseHeader("cache-control", "max-age=3600");
		
    }

}



